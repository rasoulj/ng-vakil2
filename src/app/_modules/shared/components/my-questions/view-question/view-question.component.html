<div class="page-content">
    <mat-card style="min-width: 44rem; padding: 1rem;">
        <mat-card-content style="display: flex; justify-content: space-between;">
            <app-avatar [user]="question.responderId" [showName]="true">
            </app-avatar>
            <div style="display: flex; align-items: center;">
                <small style="border: 1px solid #eee; border-radius: 5px; padding: 0.5rem;">{{expertise |
                    async}}</small>

                <button mat-icon-button color="warn" matTooltip="{{visibility | persian}}">
                    <mat-icon>{{visibility}}</mat-icon>
                </button>

                <button mat-icon-button color="accent" (click)="loadData()" matTooltip="{{'refresh' | persian}}">
                    <mat-icon>refresh</mat-icon>
                </button>
                <button mat-icon-button color="primary" routerLink="/my-questions"
                    matTooltip="{{'my-questions' | persian}}">
                    <mat-icon>contact_support</mat-icon>
                </button>
            </div>
        </mat-card-content>
        <mat-card-content>
            <div
                style="display: flex; justify-content: center; border: 1px solid #eee; padding: 1rem; margin-bottom: 1rem; font-size: 1rem; font-weight: 300; border-radius: 1rem;">
                {{question.title}}
            </div>

        </mat-card-content>
        <mat-card-content>
            <app-view-answer *ngFor="let answer of question.answers" [answer]="answer">
            </app-view-answer>
        </mat-card-content>
        <mat-card-content *ngIf="!completed">
            <form (submit)="onSend()" [formGroup]="form">
                <mat-form-field appearance="outline" class="full">
                    <mat-label>{{cap.body | persian}}</mat-label>
                    <textarea appearance="outline" matInput formControlName="answer"
                        placeholder="{{cap.body | persian}}" rows="5"></textarea>
                    <mat-hint>{{cap.hint | persian}}</mat-hint>
                    <mat-error *ngIf="answer?.touched && answer?.invalid">
                        {{cap.message | persian}}
                    </mat-error>
                </mat-form-field>
            </form>
        </mat-card-content>
        <mat-card-actions class="buttons">
            <button *ngIf="!completed" [class.spinner]="loading | async" (click)="onSend()" [disabled]="form.invalid"
                color="primary" mat-raised-button>
                {{ cap.send | persian}}
                <mat-icon iconPositionEnd style="transform: rotate(180deg);">send</mat-icon>
            </button>
            <button (click)="onBack()" mat-raised-button>
                {{"back" | persian}}
                <mat-icon iconPositionEnd>chevron_left</mat-icon>
            </button>
            <button *ngIf="!completed" (click)="onComplete()" [class.spinner]="loading | async" color="accent"
                mat-raised-button>
                {{"complete question" | persian}}
                <mat-icon iconPositionEnd>check</mat-icon>
            </button>
        </mat-card-actions>
    </mat-card>
</div>