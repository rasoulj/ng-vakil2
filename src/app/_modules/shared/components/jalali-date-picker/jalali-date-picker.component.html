<div style="display: flex; justify-content: space-around; align-items: center;">
    <button mat-button color="primary" (click)="prevMonth()">
        {{'prev month' | persian}}
        <mat-icon>chevron_right</mat-icon>
    </button>
    {{title}}
    <button type="button" (click)="selectToday()" mat-stroked-button color="accent">
        {{"today" | persian}}
    </button>
    <button matIconPrefix mat-button color="primary" (click)="nextMonth()">
        <mat-icon iconPositionEnd>chevron_left</mat-icon>
        {{'next month' | persian}}
    </button>
</div>
<div style="border-radius: 0.25rem; box-shadow: 0 1px 2px rgb(0 0 0 / 0.2);">
    <mat-grid-list cols="7" [rowHeight]="rowHeight" dir="rtl">
        <mat-grid-tile [class]="getColClass(i)" *ngFor="let d of weekDays; index as i">
            {{d[0]}}
        </mat-grid-tile>

        <mat-grid-tile matRipple [matRippleDisabled]="d.disabled" (click)="onSelect(d)" *ngFor="let d of calendar"
            [ngClass]="d.classNameParent">
            <button [disabled]="d.disabled" *ngIf="d.isToday" mat-mini-fab color="white" type="button">
                <ng-container *ngTemplateOutlet="term; context: d" />
            </button>
            <button [disabled]="d.disabled" *ngIf="d.isSelected" mat-mini-fab type="button" [disabled]="!d">
                <ng-container *ngTemplateOutlet="term; context: d" />
            </button>
            <button [disabled]="d.disabled" class="btn" *ngIf="d.isNormal" type="button" mat-icon-button>
                <ng-container *ngTemplateOutlet="term; context: d" />
            </button>
            <button [disabled]="d.disabled" class="btn" *ngIf="d.isOut && !d.isSelected && !d.isToday" type="button"
                mat-icon-button>
                <ng-container *ngTemplateOutlet="term; context: d" />
            </button>
        </mat-grid-tile>
    </mat-grid-list>
</div>

<ng-template #term let-isSelected="isSelected" let-day="day" let-className="className" let-holiday="holiday"
    let-disabled="disabled" let-type="type" let-callsCount="callsCount">
    <span class="hide-text" [matBadgeHidden]="callsCount <= 0 || disabled" [matBadge]="callsCount" matBadgeSize="small"
        [matBadgeColor]="(holiday?.type === 'holiday' || isSelected) ? 'primary' : 'accent'"
        [ngStyle]="{color: isSelected ? 'white' : ''}" [ngClass]="className">{{day}}</span>
</ng-template>